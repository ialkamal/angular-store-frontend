<div class="cart-container">
  @if(cartLoaded){
  <div class="cart-panel">
    @for(product of cart; track product.id){
    <div class="cart-item">
      <img src="{{ product.url }}" class="cart-image" />
      <div class="cart-item-detail" style="margin-left: 50px">
        <p>
          <strong>{{ product.name }}</strong>
        </p>
        <p>${{ product.price }}</p>
        <p>
          Amount:
          <input
            class="number-input"
            #amount
            value="{{ product.qty }}"
            (change)="changeCartQty(product.id, amount.value)"
          />
        </p>
      </div>
    </div>
    }
    <h2>Total: ${{ total }}</h2>
  </div>
  <div>
    <form #form="ngForm" (ngSubmit)="submitForm()">
      <div class="form-group">
        <label>Full Name</label>
        <input
          type="text"
          name="fullName"
          class="form-control"
          placeholder="(minimum 3 characters)"
          [(ngModel)]="fullName"
          required
          minlength="3"
          #fullNameField="ngModel"
        />
        @if(fullNameField.errors?.['minlength']){
        <small class="text-danger">Full Name must be at least 3 characters long.</small>
        }
      </div>
      <div class="form-group">
        <label>Address</label>
        <input
          type="text"
          name="address"
          class="form-control"
          placeholder="(minimum 6 characters)"
          [(ngModel)]="address"
          required
          minlength="6"
          #addressField="ngModel"
        />
        @if(addressField.errors?.['minlength']){
        <small class="text-danger">Address must be at least 6 characters long.</small>
        }
      </div>
      <div class="form-group">
        <label>Credit card number</label>
        <input
          type="text"
          name="creditCard"
          class="form-control"
          placeholder="(16-digit number)"
          aria-describedby="warning"
          [(ngModel)]="creditCard"
          required
          pattern="[0-9]{16}"
          #ccField="ngModel"
        />
        @if(ccField.errors?.['pattern']){
        <small class="text-danger">Credit Card must be a 16 digit number.</small>
        <br />
        }

        <small id="warning" class="form-text text-muted"
          >We'll never share your payment details with anyone else.</small
        >
      </div>
      <button type="submit" class="btn btn-primary" [disabled]="form.invalid">Submit</button>
    </form>
  </div>
  } @else {
  <p class="empty-cart-message">Your cart is empty!</p>
  }
</div>
